text_about_this_tool = """
このツールは、A/Bテストの結果を「ベイズ統計」と「頻度論統計（カイ二乗検定）」の2つのアプローチで分析し、比較することができます。
- **ベイズ分析**: 施策の優劣を「確率」として解釈し、柔軟な意思決定をサポートします。
- **カイ二乗検定**: 古典的な統計手法で、2つのグループ間に「統計的に有意な差」があるかどうかをp値で判断します。
"""

text_about_baysian_analysis = """
#### 分布プロットの見方
- **p_a, p_bの分布**: それぞれのグループのコンバージョン率が、どの値を取りそう
かという「確信度」を分布で表しています。幅が狭いほど、推定の確信度が高いことを意味します。
- **uplift (p_b - p_a)の分布**: BがAよりどれだけ良いか（絶対差）の分布です。
    - 分布全体が0より大きければ、「BはAより良い」と強く言えそうです。
    - 0をまたいでいる場合、優劣の判断は不確実です。分布が0より大きい部分の面積が「BがAを上回る確率」に相当します。
- **relative_uplift ((p_b - p_a)/p_a)の分布**: 改善率の分布です。「CVRが何%改善したか」を確率的に解釈できます。
#### こんな時に便利
- 「BがAより良い確率は？」といった問いに直接答えたい時。
- テスト期間が短く、サンプル数が少なくても、暫定的な示唆を得たい時。
- 「有意差なし」という結果だけでなく、優劣の確率を知り、ビジネス判断に活かしたい時。
"""

text_about_chi_squared_test = """
#### p値の解釈
- **p値**は、「もしAとBの間に本当は差がないとしたら、今回観測されたような差（またはそれ以上の差）が偶然生じる確率」を示します。
- 慣習的に、p値が0.05（5%）を下回る場合に「統計的に有意な差がある」と判断し、「AとBのコンバージョン率には差がある」と結論付けます。
- p値が0.05を上回る場合は、「統計的に有意な差があるとは言えない」と結論付けます。これは「差がない」ことを証明するものではない点に注意が必要です。
#### こんな時に便利
- 伝統的な統計的仮説検定の枠組みで、客観的な「有意差」の有無を判断したい時。
- レポートなどで、広く受け入れられているp値を報告する必要がある時。
#### 注意点: pハッキングと検定の恣意的な停止
- **pハッキング**: p値が0.05を下回るまで、分析方法を色々試したり、データを追加
したり、逆に一部を除外したりする行為は「pハッキング」と呼ばれ、誤った結論を導く原因となります。
- **恣意的な検定停止**: テストの途中でp値が0.05を下回ったからといって、そこでテストを終了してはいけません。
これは「偽陽性（本当は差がないのに、差があると判断してしまうこと）」の確率を高める行為です。テストは、
事前に決めたサンプルサイズに達するまで続ける必要があります。
"""

text_about_power_analysis = """
**検出力分析 (Power Analysis)** は、A/Bテストを**実施する前**に行う、適切なサンプルサイズを見積もるための統計的な手法です。

#### なぜ必要か？
- サンプルサイズが小さすぎると、本当に効果のある施策でも「差がない」という誤った結論に至るリスク（偽陰性）が高まります。
- 逆に、サンプルサイズが大きすぎると、実務的には意味のないごく僅かな差でも「統計的に有意」という結果になりやすくなる上、
時間やコストも無駄にかかってしまいます。検出力分析は、これらのリスクとコストのバランスを取るために役立ちます。

#### 主要な4つの要素
1.  **検出力 (Power, 1-β)**: 本当に差がある時に、それを「差がある」と正しく検出できる確率。一般的に80% (0.8) に設定されます。
2.  **有意水準 (Significance Level, α)**: 本当は差がないのに、「差がある」と間違って判断してしまう確率（偽陽性）。
通常、5% (0.05) に設定されます。
3.  **効果量 (Effect Size)**: 検出したい差の大きさ（例: CVRが2%から2.5%に改善）。効果量が小さいほど、
それを検出するためにより多くのサンプルサイズが必要になります。
4.  **サンプルサイズ (Sample Size)**: 各グループのユーザー数や試行回数。

このツールでは検出力分析は行えませんが、A/Bテストを計画する際には、これらの概念を理解し、専用の計算ツールなどを使って事前にサンプルサイズを見積もることが非常に重要です。
"""

text_bayesien_vs_chi_squared = """
| 特徴 | ベイズ分析 | カイ二乗検定 |
|:---|:---|:---|
| **得られる結果** | パラメータの確率分布 | p値 |
| **解釈の仕方** | 「BがAより良い確率はX%」 | 「有意差がある/ない」 |
| **サンプルサイズ**| 小さくても示唆は得られる | ある程度の大きさが必要 |
| **柔軟性** | 事前知識をモデルに組込可能 | 困難 |
| **計算コスト** | 高い（MCMCサンプリング） | 非常に低い |

**使い分けのヒント**:
- **カイ二乗検定**で「そもそも差があると言えるのか？」を素早く確認し、
- **ベイズ分析**で「では、どのくらい差がありそうか？」「Bを選ぶべき確率は？」といった、より踏み込んだ意思決定を行う、という使い分けが有効です。
"""
